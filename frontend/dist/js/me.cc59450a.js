"use strict";(self["webpackChunkmomo_store"]=self["webpackChunkmomo_store"]||[]).push([[693],{5167:function(s,e,a){a.d(e,{A:function(){return i}});var o=a(641),t=a(33);function r(s,e,a,r,n,l){return(0,o.uX)(),(0,o.CE)("div",{class:(0,t.C4)(["alert fade show",{"alert-dismissible":s.dismissible}]),role:"alert"},[(0,o.Lk)("strong",null,(0,t.v_)(s.modelValue),1),s.dismissible?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:e[0]||(e[0]=(...e)=>s.handleClick&&s.handleClick(...e))})):(0,o.Q3)("",!0)],2)}var n=(0,o.pM)({props:{modelValue:{type:String,default:""},dismissible:{type:Boolean,default:!0}},emits:["update:modelValue"],methods:{handleClick(){this.$emit("update:modelValue","")}}}),l=a(6262);const d=(0,l.A)(n,[["render",r]]);var i=d},8663:function(s,e,a){a.r(e),a.d(e,{default:function(){return x}});var o=a(641),t=a(33);const r=s=>((0,o.Qi)("data-v-442fd325"),s=s(),(0,o.jt)(),s),n={class:"card d-inline-block text-start"},l=r((()=>(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h3",{class:"card-title"},"Profile")],-1))),d={class:"card-body"},i={class:"text-secondary"},u=r((()=>(0,o.Lk)("hr",{class:"text-secondary"},null,-1)));function c(s,e,a,r,c,m){const p=(0,o.g2)("ChangePassword"),h=(0,o.g2)("Center");return(0,o.uX)(),(0,o.Wv)(h,{class:"h-100"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[l,(0,o.Lk)("div",d,[(0,o.Lk)("h2",null,(0,t.v_)(s.fullname),1),(0,o.Lk)("h4",i,(0,t.v_)(s.email),1),u,s.changingPassword?((0,o.uX)(),(0,o.Wv)(p,{key:0,onClose:e[0]||(e[0]=e=>s.changingPassword=!1)})):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn btn-primary",onClick:e[1]||(e[1]=e=>s.changingPassword=!0)},"Change Password"))])])])),_:1})}var m=a(2820),p=a(3751);const h={class:"mb-2"},g=["disabled"],b={class:"mb-2"},w=["disabled"],f={class:"mb-2"},k=["disabled"],C={class:"d-flex justify-content-end"},v=["disabled"],y=["disabled"];function P(s,e,a,t,r,n){const l=(0,o.g2)("Alert"),d=(0,o.g2)("Spinner"),i=(0,o.g2)("Center");return(0,o.uX)(),(0,o.CE)(o.FK,null,[s.error_message?((0,o.uX)(),(0,o.Wv)(l,{key:0,modelValue:s.error_message,"onUpdate:modelValue":e[0]||(e[0]=e=>s.error_message=e),class:"alert-danger"},null,8,["modelValue"])):(0,o.Q3)("",!0),s.success_message?((0,o.uX)(),(0,o.Wv)(l,{key:1,modelValue:s.success_message,"onUpdate:modelValue":e[1]||(e[1]=e=>s.success_message=e),class:"alert-success",dismissible:!1},null,8,["modelValue"])):((0,o.uX)(),(0,o.CE)("form",{key:2,onSubmit:e[8]||(e[8]=(0,p.D$)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"])),class:"my-3"},[(0,o.Lk)("div",h,[(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=e=>s.oldPassword=e),class:"form-control",placeholder:"Old Password",disabled:s.loading,required:""},null,8,g),[[p.Jo,s.oldPassword]])]),(0,o.Lk)("div",b,[(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=e=>s.password=e),class:"form-control",placeholder:"New password",ref:"password",onInput:e[4]||(e[4]=(...e)=>s.handlePasswordInput&&s.handlePasswordInput(...e)),disabled:s.loading,required:""},null,40,w),[[p.Jo,s.password]])]),(0,o.Lk)("div",f,[(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=e=>s.passwordConfirmation=e),class:"form-control",placeholder:"Confirm the new password",ref:"passwordConfirmation",onInput:e[6]||(e[6]=(...e)=>s.handlePasswordInput&&s.handlePasswordInput(...e)),disabled:s.loading,required:""},null,40,k),[[p.Jo,s.passwordConfirmation]])]),(0,o.Lk)("div",C,[s.loading?((0,o.uX)(),(0,o.Wv)(i,{key:0,class:"mx-2"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{size:"2rem",thickness:"0.75rem"})])),_:1})):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"button",class:"btn btn-secondary me-3",onClick:e[7]||(e[7]=e=>s.$emit("close")),disabled:s.loading},"Cancel",8,v),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:s.loading},"Change password",8,y)])],32))],64)}var _=a(4335),L=a(5834),V=a(5167),A=(0,o.pM)({name:"ChangePassword",components:{Spinner:L.A,Center:m.A,Alert:V.A},emits:["close"],data(){return{oldPassword:"",password:"",passwordConfirmation:"",loading:!1,error_message:"",success_message:""}},methods:{handleSubmit(){this.loading=!0,this.$store.dispatch("changePassword",{old_password:this.oldPassword,new_password:this.password}).then((s=>{this.success_message=s.detail,setTimeout((()=>{this.$emit("close"),this.$router.push("/login")}),3e3)})).catch((s=>{_.A.isAxiosError(s)&&s.response?this.error_message=s.response.data.detail:this.error_message="Connection error"})).finally((()=>{this.loading=!1}))},handlePasswordInput(){const s=this.$refs.passwordConfirmation;s.setCustomValidity(this.password===this.passwordConfirmation?"":"Passwords do not match")}}}),$=a(6262);const X=(0,$.A)(A,[["render",P]]);var I=X,E=(0,o.pM)({name:"Profile",components:{Center:m.A,ChangePassword:I},created(){this.$store.state.auth.isLoggedIn||this.$router.push("/login")},data(){return{fullname:this.$store.getters.userFullname,email:this.$store.getters.userEmail,changingPassword:!1}}});const S=(0,$.A)(E,[["render",c],["__scopeId","data-v-442fd325"]]);var x=S}}]);
//# sourceMappingURL=me.cc59450a.js.map